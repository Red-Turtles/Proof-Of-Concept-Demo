<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="csrf-token" content="{{ csrf_token() }}" />
  <title>Share a Sighting ‚Ä¢ WildID Community</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>
<body>
  <nav class="header-nav">
    <div class="nav-container">
      <div class="logo">
        <span class="logo-icon">üçÉ</span>
        <span class="logo-text">WildID</span>
      </div>
      <div class="nav-links">
        <a href="/" class="nav-link" data-transition="true">Home</a>
        <a href="/discovery" class="nav-link" data-transition="true">Discovery</a>
        <a href="/community" class="nav-link" data-transition="true">Community</a>
        {% if current_user %}
        <div class="profile-menu">
          <a href="/profile" class="nav-link profile-toggle" data-transition="true">Profile</a>
          <div class="profile-dropdown">
            <a href="/profile" data-transition="true">View Profile</a>
            <a href="/history" data-transition="true">History</a>
            <hr class="dropdown-divider" />
            <form action="/auth/logout" method="post" class="logout-form">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
              <button type="submit">Sign Out</button>
            </form>
          </div>
        </div>
        {% else %}
        <a href="/auth/login" class="nav-link" data-transition="true">Sign In</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <main class="community-compose">
    <section class="compose-card">
      <h1>Share a new sighting</h1>
      <p class="compose-subtitle">Upload a photo, add a caption, and inspire the WildID community.</p>

      <form action="{{ url_for('community_new') }}" method="post" enctype="multipart/form-data" class="compose-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

        <div class="form-group">
          <label for="title">Title <span>(optional)</span></label>
          <input type="text" id="title" name="title" maxlength="140" placeholder="e.g. Curious Red Fox at Sunset" />
        </div>

        <div class="form-group">
          <label for="species">Species <span>(optional)</span></label>
          <input type="text" id="species" name="species" maxlength="120" placeholder="e.g. Vulpes vulpes" />
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea id="description" name="description" rows="5" maxlength="1200" placeholder="Tell the community about your sighting..."></textarea>
        </div>

        <div class="form-group">
          <label for="image">Upload Photo</label>
          <label class="upload-area" for="image">
            <div class="upload-content">
              <div class="upload-icon">üì∏</div>
              <div class="upload-text">
                <span class="upload-title">Click to upload or drag and drop</span>
                <span class="upload-subtitle">PNG, JPG, JPEG, GIF, BMP, or WEBP (max 16MB)</span>
                <span class="upload-meta" id="upload-filename">No file selected</span>
              </div>
              <input type="file" id="image" name="image" accept=".png,.jpg,.jpeg,.gif,.bmp,.webp" required />
            </div>
          </label>
        </div>

        <div class="compose-actions">
          <a href="{{ url_for('community_feed') }}" class="secondary" data-transition="true">Cancel</a>
          <button type="submit" class="primary"><i class="fas fa-paper-plane"></i> Share with Community</button>
        </div>
      </form>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <p>WildID ‚Ä¢ Wildlife Identification ‚Ä¢ Auto file cleanup ‚Ä¢ Interactive habitat mapping</p>
    </div>
  </footer>

  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

