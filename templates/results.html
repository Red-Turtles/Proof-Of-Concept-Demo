<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Animal Species Identifier - Results</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>
  <header>
    <h1>üêæ Animal Identifier (PoC)</h1>
    <p>Results from Together.ai</p>
  </header>
  <main class="container">
    <section class="card">
      <h2>Results</h2>
      <p class="desc">Here's what the AI thinks about your animal.</p>
      <div class="panel">
        <span class="badge">Together.ai (Qwen2.5-VL Vision)</span>
        <p><strong>Is Animal:</strong> {{ "‚úÖ Yes" if result.is_animal else "‚ùå No" }}</p>
        <p><strong>Species:</strong> {{ result.species or "Unknown" }}</p>
        <p><strong>Common Name:</strong> {{ result.common_name or "Unknown" }}</p>
        <p><strong>Animal Type:</strong> {{ result.animal_type or "Unknown" }}</p>
        <p><strong>Confidence:</strong>
          {% set confidence = result.confidence or "Unknown" %}
          {% if confidence.lower() == "high" %}
            üü¢ High
          {% elif confidence.lower() == "medium" %}
            üü° Medium
          {% elif confidence.lower() == "low" %}
            üî¥ Low
          {% else %}
            {{ confidence }}
          {% endif %}
        </p>
      </div>

      <div class="panel" style="margin-top:1rem">
        <span class="badge">Preview</span>
        <img class="preview" src="data:{{ image_mime }};base64,{{ image_data }}" alt="Uploaded image preview">
      </div>

      <div class="form-row" style="margin-top:1rem">
        <a href="/"><button>Identify another animal</button></a>
        {% if result.is_animal and result.species and result.species != "Unknown" %}
        <a href="/map?species={{ result.species | urlencode }}&common_name={{ result.common_name | urlencode }}&animal_type={{ result.animal_type | urlencode }}"><button>View Habitat Map</button></a>
        {% endif %}
      </div>
    </section>
  </main>
  <footer>Animal Species Identification ‚Ä¢ Auto file cleanup ‚Ä¢ Secure file handling</footer>
</body>
</html>